// Code generated by goa v3.3.1, DO NOT EDIT.
//
// workflow HTTP client CLI support package
//
// Command:
// $ goa gen github.com/fuseml/fuseml-core/design

package client

import (
	"encoding/json"
	"fmt"

	workflow "github.com/fuseml/fuseml-core/gen/workflow"
	goa "goa.design/goa/v3/pkg"
)

// BuildListPayload builds the payload for the workflow list endpoint from CLI
// flags.
func BuildListPayload(workflowListName string) (*workflow.ListPayload, error) {
	var name *string
	{
		if workflowListName != "" {
			name = &workflowListName
		}
	}
	v := &workflow.ListPayload{}
	v.Name = name

	return v, nil
}

// BuildRegisterPayload builds the payload for the workflow register endpoint
// from CLI flags.
func BuildRegisterPayload(workflowRegisterBody string) (*workflow.Workflow, error) {
	var err error
	var body RegisterRequestBody
	{
		err = json.Unmarshal([]byte(workflowRegisterBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"created\": \"2021-04-09T06:17:25Z\",\n      \"description\": \"This workflow is just trains a model and serve it\",\n      \"id\": \"FB1E8AC6-4FA4-C883-ED5A-54960E88F5FE\",\n      \"inputs\": [\n         {\n            \"default\": \"mlflow-example\",\n            \"description\": \"An MLFlow project codeset\",\n            \"labels\": [\n               \"mlflow-project\"\n            ],\n            \"name\": \"mlflow-codeset\",\n            \"type\": \"codeset\"\n         },\n         {\n            \"default\": \"mlflow-example\",\n            \"description\": \"An MLFlow project codeset\",\n            \"labels\": [\n               \"mlflow-project\"\n            ],\n            \"name\": \"mlflow-codeset\",\n            \"type\": \"codeset\"\n         }\n      ],\n      \"name\": \"TrainAndServe\",\n      \"outputs\": [\n         {\n            \"description\": \"The URL where the exposed prediction service endpoint can be contacted to run predictions.\",\n            \"name\": \"prediction-url\",\n            \"type\": \"string\"\n         },\n         {\n            \"description\": \"The URL where the exposed prediction service endpoint can be contacted to run predictions.\",\n            \"name\": \"prediction-url\",\n            \"type\": \"string\"\n         }\n      ],\n      \"steps\": [\n         {\n            \"env\": [\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               }\n            ],\n            \"image\": \"ghcr.io/fuseml/kfserving-predictor:1.0\",\n            \"inputs\": [\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               },\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               }\n            ],\n            \"name\": \"predictor\",\n            \"outputs\": [\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               }\n            ]\n         },\n         {\n            \"env\": [\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               }\n            ],\n            \"image\": \"ghcr.io/fuseml/kfserving-predictor:1.0\",\n            \"inputs\": [\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               },\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               }\n            ],\n            \"name\": \"predictor\",\n            \"outputs\": [\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               }\n            ]\n         },\n         {\n            \"env\": [\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               },\n               {\n                  \"name\": \"PATH\",\n                  \"value\": \"/project\"\n               }\n            ],\n            \"image\": \"ghcr.io/fuseml/kfserving-predictor:1.0\",\n            \"inputs\": [\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               },\n               {\n                  \"codeset\": {\n                     \"name\": \"mlflow-project\",\n                     \"path\": \"/project\"\n                  },\n                  \"name\": \"model-uri\",\n                  \"value\": \"s3://mlflow-artifacts/3/c7ae3b0e6fd44b4b96f7066c66672551/artifacts/model\"\n               }\n            ],\n            \"name\": \"predictor\",\n            \"outputs\": [\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               },\n               {\n                  \"image\": {\n                     \"dockerfile\": \"/project/.fuseml/Dockerfile\",\n                     \"name\": \"registry.fuseml-registry/mlflow-project/mlflow-codeset:0.1\"\n                  },\n                  \"name\": \"model-uri\"\n               }\n            ]\n         }\n      ]\n   }'")
		}
		if body.Steps == nil {
			err = goa.MergeErrors(err, goa.MissingFieldError("steps", "body"))
		}
		if body.ID != nil {
			err = goa.MergeErrors(err, goa.ValidateFormat("body.id", *body.ID, goa.FormatUUID))
		}
		if body.Created != nil {
			err = goa.MergeErrors(err, goa.ValidateFormat("body.created", *body.Created, goa.FormatDateTime))
		}
		if err != nil {
			return nil, err
		}
	}
	v := &workflow.Workflow{
		ID:          body.ID,
		Created:     body.Created,
		Name:        body.Name,
		Description: body.Description,
	}
	if body.Inputs != nil {
		v.Inputs = make([]*workflow.WorkflowInput, len(body.Inputs))
		for i, val := range body.Inputs {
			v.Inputs[i] = marshalWorkflowInputRequestBodyToWorkflowWorkflowInput(val)
		}
	}
	if body.Outputs != nil {
		v.Outputs = make([]*workflow.WorkflowOutput, len(body.Outputs))
		for i, val := range body.Outputs {
			v.Outputs[i] = marshalWorkflowOutputRequestBodyToWorkflowWorkflowOutput(val)
		}
	}
	if body.Steps != nil {
		v.Steps = make([]*workflow.WorkflowStep, len(body.Steps))
		for i, val := range body.Steps {
			v.Steps[i] = marshalWorkflowStepRequestBodyToWorkflowWorkflowStep(val)
		}
	}

	return v, nil
}

// BuildGetPayload builds the payload for the workflow get endpoint from CLI
// flags.
func BuildGetPayload(workflowGetWorkflowNameOrID string) (*workflow.GetPayload, error) {
	var workflowNameOrID string
	{
		workflowNameOrID = workflowGetWorkflowNameOrID
	}
	v := &workflow.GetPayload{}
	v.WorkflowNameOrID = workflowNameOrID

	return v, nil
}
